{"version":3,"file":"bundle.js","sources":["loadAndProcessData.js","index.js"],"sourcesContent":["import { feature } from 'topojson';\nimport { tsv, json } from 'd3';\nexport const loadAndProcessData = () =>\n  json('https://cdn.freecodecamp.org/testable-projects-fcc/data/choropleth_map/counties.json')\n    .then((topoJSONdata) => {\n      const counties = feature(topoJSONdata, topoJSONdata.objects.counties);\n      return counties;\n    });\n\n\n//Tried to convert this into a promise.all, and it failed. :( \n\n\n// export const loadAndProcessData = () =>\n//   Promise.All([\n//     json(\n//       'https://cdn.freecodecamp.org/testable-projects-fcc/data/choropleth_map/counties.json'\n//     ),\n//     json(\n//       'https://cdn.freecodecamp.org/testable-projects-fcc/data/choropleth_map/for_user_education.json'\n//     ),\n//   ])\n//   .then(([topoJSONdata]) => {\n//     console.log(topoJSONdata)\n    \n//     // const counties = feature(topoJSONdata, topoJSONdata.objects.counties);\n//     // return counties;\n    \n//     // console.log(topoJSONdata)\n//     // const counties = feature(topoJSONdata, topoJSONdata.objects.counties);\n//     // return counties;\n//   })","import {\n  select,\n  geoAlbersUsa,\n  geoPath,\n  zoom,\n  json,\n  event,\n  scaleOrdinal,\n  schemeSpectral,\n  schemeGreens,\n  schemeCategory10,\n} from 'd3';\nimport { loadAndProcessData } from './loadAndProcessData';\nimport { colorLegend } from './colorLegend';\n\nvar width = 900;\nvar height = 600;\nvar padding = 60;\n\nconst margin = {top: 50, right: 20, bottom: 35, left: 140}\nconst innerWidth = width - margin.left - margin.right;\nconst innerHeight = height - margin.top - margin.bottom;\n\nconst svg = select('svg');\n\nconst projection = geoAlbersUsa();\nconst pathGenerator = geoPath();\n\nconst g = svg.append('g');\n\nsvg.call(\n  zoom().on('zoom', () => {\n    g.attr('transform', event.transform);\n  })\n);\n\nloadAndProcessData().then((counties) => {\n  var color = d3\n    .scaleThreshold()\n    .domain(d3.range(2.6, 75.1, (75.1 - 2.6) / 8))\n    .range(d3.schemeGreens[9]);\n\n  json(\n    'https://cdn.freecodecamp.org/testable-projects-fcc/data/choropleth_map/for_user_education.json'\n  ).then((eduData) => {\n\n\n    const toolTipContent = function(d) {\t\t\t\n      document.getElementById(\"tooltip\").setAttribute(\"data-education\", eduData.find((edu) => edu.fips === d.id).bachelorsOrHigher ); \n      const tooltipText = \n      \n      eduData.find((edu) => edu.fips === d.id).area_name + \" \" + \n      eduData.find((edu) => edu.fips === d.id).state + \" \" + \n      eduData.find((edu) => edu.fips === d.id).bachelorsOrHigher + \"% \"\n\n      return tooltipText\n      };  \n  \n    var tip = d3.tip()\n      .attr('class', 'd3-tip')\n      .attr('id', 'tooltip')\n      .html( (d) => toolTipContent(d) )\n  \n    svg.call(tip)  \n    \n\n\n    g.selectAll('path')\n      .data(counties.features)\n      .enter()\n      .append('path')\n      .attr('class', 'county')\n      .attr('data-fips', d => d.id)\n      .attr('data-education', d => eduData.find((edu) => edu.fips === d.id).bachelorsOrHigher)\n      .attr('d', pathGenerator)\n      .attr('fill', (d) =>\n        color(eduData.find((edu) => edu.fips === d.id).bachelorsOrHigher)\n      )\n      .on('mouseover', tip.show)\n      .on('mouseout', tip.hide)\n      \n      const colorLegend = (selection, props) => {\n        const { color, circleRadius, spacing, textOffset } = props;\n        \n        const groups = selection.selectAll('g')\n          .data(color.domain());\n        \n        const groupsEnter = groups\n            .enter().append('g')\n            .attr('class', 'tick')\n            .attr('id', 'legend');\n        \n        groupsEnter\n          .merge(groups)\n          .attr('transform', (d, i) => `translate(${i * spacing}, 0)`);\n          \n          groups.exit().remove();\n      \n        // nested version of general update pattern\n        groupsEnter\n          .append('rect')\n          .attr('id', 'legend')\n          .merge(groups.select('rect'))\n          .attr('x', -22)\n          .attr('y', -15)\n          .attr('width', 40)\n          .attr('height', 30)\n          .attr('fill', color);\n      \n        groupsEnter\n          .append('text')\n          .merge(groups.select('text'))\n          .text((d) => Math.round(d))\n          .attr('dy', '0.32em')\n          .attr('fill', '#8e88883')\n          .attr('stroke', 'black')\n          .attr('x', textOffset);\n      };\n      \n       svg.append('g')\t\n          .attr('transform', `translate(${innerWidth/3},${innerHeight + 60 })`)\n          .call(colorLegend, {\n            color,\n            circleRadius: 15,\n            spacing: 40,\n            textOffset: -8\n          });\n\n\n\n          // console.log('are we even here?')\n\n\n    // .attr('id', (d) => d.id)\n    // .attr('fill', (d) => {\n    //   var result = eduData.filter((obj) => {\n    //     return obj.fips === d.id;\n    //   });\n    //   if (result[0]) {\n    //     return color(result[0].bachelorsOrHigher);\n    //   }\n    //   //could not find a matching fips id in the data\n    //   return color(0);\n    // });\n  });\n});\n"],"names":["const","json","feature","select","geoAlbersUsa","geoPath","zoom","event"],"mappings":"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"}