{"version":3,"file":"bundle.js","sources":["index.js"],"sourcesContent":["var width = 960;\nvar height = 570;\nvar padding = 60;\n\nconst margin = {top: 25, right: 5, bottom: 15, left: 5}\nconst innerWidth = width - margin.left - margin.right;\nconst innerHeight = height - margin.top - margin.bottom;\n\nvar svg = d3.select(\"svg\"),\n    width = +svg.attr(\"width\"),\n    height = +svg.attr(\"height\");\n\nvar fader = function(color) { return d3.interpolateRgb(color, \"#fff\")(0.2); },\n    color = d3.scaleOrdinal(d3.schemeCategory20.map(fader)),\n    format = d3.format(\"s\");\n\nvar treemap = d3.treemap()\n    .tile(d3.treemapResquarify)\n    .size([innerWidth, innerHeight])\n    .paddingInner(1);\n\n\n\n\nd3.json(\"https://cdn.freecodecamp.org/testable-projects-fcc/data/tree_map/video-game-sales-data.json\", function(error, data) {\n  if (error) throw error;\n\n  var root = d3.hierarchy(data)\n      .eachBefore(function(d) { d.data.id = (d.parent ? d.parent.data.id + \".\" : \"\") + d.data.name; })\n      .sum(sumBySize)\n      .sort(function(a, b) { return b.height - a.height || b.value - a.value; });\n\n  treemap(root);\n\n  var cell = svg.selectAll(\"g\")\n    .data(root.leaves())\n    .enter().append(\"g\")\n      .attr(\"transform\", function(d) { return \"translate(\" + d.x0 + \",\" + d.y0 + \")\"; });\n\nconst toolTipContent = function(d) {\t\t\t\n  document.getElementById(\"tooltip\").setAttribute(\"data-value\", d.data.value ); \n  const tooltipText = \n  \"Name: \" + d.data.name + \"<br/>\" +\n  \"Platform: \" + d.data.category + \"<br/>\"  +\n  d.data.value + \" million copies sold\"\n\n  return tooltipText\n  };  \n\nvar tip = d3.tip()\n  .attr('class', 'd3-tip')\n  .attr('id', 'tooltip')\n  .html( (d) => toolTipContent(d) )\n\nsvg.call(tip)  \n\n      \n\n  cell.append(\"rect\")\n      .attr(\"class\", \"tile\")\n      .attr(\"id\", function(d) { \n        \n        // console.log(d)\n        \n        return d.data.id; })\n      .attr(\"data-name\", function(d) { return d.data.name; })\n      .attr(\"data-category\", function(d) { return d.data.category; })\n      .attr(\"data-value\", function(d) { return +d.data.value; })\n      .attr(\"width\", function(d) { return d.x1 - d.x0; })\n      .attr(\"height\", function(d) { return d.y1 - d.y0; })\n      .attr(\"fill\", function(d) { return color(d.data.category); })\n      .on('mouseover', tip.show)\n      .on('mouseout', tip.hide)\n\n  // cell.append(\"clipPath\")\n  //     .attr(\"id\", function(d) { return \"clip-\" + d.data.id; })\n  //   .append(\"use\")\n  //     .attr(\"xlink:href\", function(d) { return \"#\" + d.data.id; });\n\n  cell.append(\"text\")\n      .attr(\"clip-path\", function(d) { return \"url(#clip-\" + d.data.id + \")\"; })\n    .selectAll(\"tspan\")\n      .data(function(d) { return d.data.name.split(/(?=[A-Z][^A-Z])/g); })\n    .enter().append(\"tspan\")\n      .attr(\"x\", 4)\n      .attr(\"y\", function(d, i) { return 13 + i * 10; })\n      .text(function(d) { return d; });\n\n  cell.append(\"title\")\n      .text(function(d) { return d.data.id + \"\\n\" + format(d.value); });\n\n      const colorLegend = (selection, props) => {\n        const { color, circleRadius, spacing, textOffset } = props;\n        \n        const groups = selection.selectAll('g')\n          .data(color.domain());\n        \n          // d3.select('body')\n          // .append('svg')\n\n        const groupsEnter = groups\n            .enter().append('g')\n            .attr('class', 'tick')\n            .attr('id', 'legend');\n        \n        groupsEnter\n          .merge(groups)\n          .attr('transform', (d, i) => `translate(${i * spacing}, 0)`);\n          \n          groups.exit().remove();\n      \n        // nested version of general update pattern\n        groupsEnter\n          .append('rect')\n          .attr('id', 'legend')\n          .merge(groups.select('rect'))\n          .attr('class', 'legend-item')\n          .attr('x', -22)\n          .attr('y', -15)\n          .attr('width', 40)\n          .attr('height', 30)\n          .attr('fill', color);\n      \n        groupsEnter\n          .append('text')\n          .merge(groups.select('text'))\n          .text((d) => (d))\n          .attr('dy', '0.32em')\n          .attr('fill', '#8e88883')\n          .attr('stroke', 'black')\n          .attr('x', textOffset);\n      };\n      \n       svg.append('g')\t\n          .attr('transform', `translate(${innerWidth/5},${innerHeight + 25})`)\n          .call(colorLegend, {\n            color,\n            circleRadius: 15,\n            spacing: 40,\n            textOffset: -8\n          });\n\n\n  // d3.selectAll(\"input\")\n  //     .data([sumBySize, sumByCount], function(d) { return d ? d.name : this.value; })\n  //     .on(\"change\", changed);\n\n//   var timeout = d3.timeout(function() {\n//     d3.select(\"input[value=\\\"sumByCount\\\"]\")\n//         .property(\"checked\", true)\n//         .dispatch(\"change\");\n//   }, 2000);\n\n//   function changed(sum) {\n//     timeout.stop();\n\n    // treemap(root.sum(sum));\n\n//     cell.transition()\n//         .duration(750)\n//         .attr(\"transform\", function(d) { return \"translate(\" + d.x0 + \",\" + d.y0 + \")\"; })\n//       .select(\"rect\")\n//         .attr(\"width\", function(d) { return d.x1 - d.x0; })\n//         .attr(\"height\", function(d) { return d.y1 - d.y0; });\n//   }\n});\n\nfunction sumByCount(d) {\n  return d.children ? 0 : 1;\n}\n\nfunction sumBySize(d) {\n  return +d.value;\n}"],"names":["const"],"mappings":"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"}